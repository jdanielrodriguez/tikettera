<div class="card mt-4">
  <form [formGroup]="eventForm" (ngSubmit)="onSubmit()">
    <div class="card-header row mx-0">
      <h5 class="col-xs-5 col-sm-5 col-md-5 col-lg-5">{{ event?.id ? 'Editar Evento' : 'Crear Nuevo Evento' }}</h5>
      <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 text-right ml-auto">
        <button class="btn btn-primary" type="submit" [disabled]="eventForm.invalid"><i class="fa fa-save"></i>
          Guardar</button>
        <button class="btn btn-secondary ml-2" type="button" (click)="onCancel()"><i class="fa fa-times"></i>
          Cancelar</button>
      </div>
    </div>
    <div class="card-body">
      <div class="row w-100 mx-0">
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
          <div class="form-group">
            <label for="name">Nombre del Evento</label>
            <input type="text" id="name" class="form-control" formControlName="name" (input)="generateSlug()"
              required />
            <div *ngIf="eventForm.get('name')?.invalid && eventForm.get('name')?.touched" class="text-danger">
              El nombre del evento es obligatorio.
            </div>
            <small class="form-text text-muted">Vista previa del slug: <strong>{{ slugPreview }}</strong></small>
          </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
          <div class="form-group">
            <label for="date_start">Fecha del Evento</label>
            <div class="input-group">
              <input id="date_start" class="form-control" placeholder="yyyy-mm-dd" formControlName="date_start"
                ngbDatepicker #d="ngbDatepicker" />
              <div class="input-group-append">
                <button class="btn btn-outline-secondary" (click)="d.toggle()" type="button">
                  ðŸ“…
                </button>
              </div>
            </div>
            <div *ngIf="eventForm.get('date_start')?.invalid && eventForm.get('date_start')?.touched"
              class="text-danger">
              La fecha de inicio es obligatoria.
            </div>
          </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
          <div class="form-group">
            <label for="description">DescripciÃ³n</label>
            <textarea id="description" class="form-control" formControlName="description" rows="3"></textarea>
          </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-8 col-lg-8">
          <div class="form-group">
            <label for="map">UbicaciÃ³n del Evento</label>
            <div id="map" style="height: 400px;" class="mt-3"></div>
          </div>
        </div>
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 row d-flex">
          <label>Coordenadas</label>
          <div class="form-group w-50">
            <label for="lat">Latitud</label>
            <input type="number" id="lat" class="form-control" formControlName="lat" step="0.000001" readonly />
          </div>
          <div class="form-group w-50">
            <label for="lng">Longitud</label>
            <input type="number" id="lng" class="form-control" formControlName="lng" step="0.000001" readonly />
          </div>
          <div class="form-group w-100">
            <label for="address">DirecciÃ³n</label>
            <textarea id="address" class="form-control" formControlName="address" rows="2"></textarea>
          </div>
          <div class="form-group w-100 text-center">
            <label for="time_start">Hora del Evento</label>
            <ngb-timepicker class="hour-component" formControlName="time_start" [spinners]="true"></ngb-timepicker>
            <div *ngIf="eventForm.get('time_start')?.invalid && eventForm.get('time_start')?.touched" class="text-danger">
              La hora de inicio es obligatoria.
            </div>
          </div>
        </div>
      </div>
      <div class="form-group text-right">
        <button class="btn btn-primary" type="submit" [disabled]="eventForm.invalid"><i class="fa fa-save"></i>
          Guardar</button>
        <button class="btn btn-secondary ml-2" type="button" (click)="onCancel()"><i class="fa fa-times"></i>
          Cancelar</button>
      </div>
    </div>
  </form>
</div>
